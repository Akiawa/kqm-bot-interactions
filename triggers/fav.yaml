description: fav proc calculator
interaction:
  - embeds:
    - title: Favonius Proc Chance Calculator
      fields:
        - name: Input
          value: |-
            <$js
              str = $OPTIONS.CRITRATE.toString();
              str += '% Crit Rate\n';
              str += ($OPTIONS.HITS.toString() + 'hit(s) per proc');
              str
            $>

        - name: Output
          value: >-
            <$js
              const favChances = [null, 0.60, 0.70, 0.80, 0.90, 1.00];
              // https://www.overleaf.com/project/61e3abf9b83169025c002b69
              const fav = (cr, hits, refine) => ((1 - (1 - (parseFloat(cr / 100) * favChances[refine])) ** hits) * 100).toFixed(2);

              const cr = $OPTIONS.CRITRATE;
              const hits = $OPTIONS.HITS;

              const output = '';
              for (i = 1; i <= 5; i++)
                output += `R${i} : ${fav(cr, hits, i)}%\n`;
              
              output;
            $>

options:
  critrate:
    required: true
    type: number
    description: Crit Rate
  hits:
    required: true
    type: number
    description: Number of hits per proc
  refine:
    required: true
    choices:
      - name: R1
        type: number
        value: 1
      - name: R2
        type: number
        value: 2
      - name: R3
        type: number
        value: 3
      - name: R4
        type: number
        value: 4
      - name: R5
        type: number
        value: 5
